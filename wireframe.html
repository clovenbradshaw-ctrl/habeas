<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Habeas ‚Äî Reimagined</title>
<link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f8f7f5;
    --sidebar: #1a1a1e;
    --sidebar-hover: rgba(255,255,255,0.06);
    --sidebar-active: rgba(255,255,255,0.12);
    --card: #ffffff;
    --border: #e4e2de;
    --border-light: #f0eeea;
    --text-primary: #1a1a1e;
    --text-secondary: #6b6860;
    --text-tertiary: #9d9a93;
    --text-inverse: #f8f7f5;

    --blue: #3b6fe0;
    --blue-light: #edf2fc;
    --blue-muted: #7da1e8;
    --green: #2d8a5e;
    --green-light: #e8f5ee;
    --yellow: #c4930a;
    --yellow-light: #fdf6e3;
    --red: #c9403f;
    --red-light: #fceaea;
    --purple: #7c5cbf;
    --purple-light: #f3eefb;
    --orange: #c67b2e;
    --orange-light: #fdf1e4;

    --stage-intake: #6366f1;
    --stage-drafting: #8b5cf6;
    --stage-review: #a855f7;
    --stage-ready: #22c55e;
    --stage-filed: #3b82f6;
    --stage-awaiting: #f59e0b;
    --stage-resolved: #9ca3af;

    --serif: 'Source Serif 4', Georgia, serif;
    --sans: 'DM Sans', system-ui, sans-serif;
    --mono: 'JetBrains Mono', monospace;

    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --radius-xl: 18px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
    --shadow-lg: 0 8px 30px rgba(0,0,0,0.12);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { font-size: 15px; }
  body {
    font-family: var(--sans);
    background: var(--bg);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ========== APP SHELL ========== */
  .app { display: flex; min-height: 100vh; }

  /* Sidebar */
  .sidebar {
    width: 220px;
    min-width: 220px;
    background: var(--sidebar);
    display: flex;
    flex-direction: column;
    padding: 0;
    position: sticky;
    top: 0;
    height: 100vh;
    z-index: 100;
  }
  .sidebar-brand {
    padding: 24px 20px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  .sidebar-brand h1 {
    font-family: var(--serif);
    font-size: 1.4rem;
    font-weight: 700;
    color: white;
    letter-spacing: -0.01em;
  }
  .sidebar-brand .status {
    font-size: 0.7rem;
    color: rgba(255,255,255,0.35);
    margin-top: 2px;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  .sidebar-brand .status-dot {
    width: 6px; height: 6px;
    background: var(--green);
    border-radius: 50%;
  }
  .sidebar-nav { flex: 1; padding: 12px 8px; }
  .nav-section-label {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: rgba(255,255,255,0.25);
    padding: 16px 12px 6px;
  }
  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 9px 12px;
    border-radius: var(--radius-sm);
    color: rgba(255,255,255,0.55);
    font-size: 0.82rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
    text-decoration: none;
    position: relative;
  }
  .nav-item:hover { background: var(--sidebar-hover); color: rgba(255,255,255,0.8); }
  .nav-item.active {
    background: var(--sidebar-active);
    color: white;
    font-weight: 600;
  }
  .nav-item .icon {
    width: 18px;
    height: 18px;
    opacity: 0.7;
    flex-shrink: 0;
  }
  .nav-item.active .icon { opacity: 1; }
  .nav-badge {
    margin-left: auto;
    background: rgba(255,255,255,0.15);
    color: rgba(255,255,255,0.7);
    font-size: 0.65rem;
    font-weight: 600;
    padding: 1px 7px;
    border-radius: 10px;
  }
  .nav-badge.alert {
    background: var(--red);
    color: white;
  }
  .sidebar-footer {
    padding: 16px 20px;
    border-top: 1px solid rgba(255,255,255,0.06);
  }
  .sidebar-user {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .user-avatar {
    width: 30px; height: 30px;
    border-radius: 50%;
    background: var(--purple);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 0.7rem;
    font-weight: 600;
  }
  .user-info { flex: 1; min-width: 0; }
  .user-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: rgba(255,255,255,0.8);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .user-role {
    font-size: 0.65rem;
    color: rgba(255,255,255,0.35);
  }

  /* Main content */
  .main {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
  }

  /* Screen nav tabs */
  .screen-tabs {
    display: flex;
    background: white;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 50;
  }
  .screen-tab {
    padding: 12px 20px;
    font-size: 0.78rem;
    font-weight: 500;
    color: var(--text-tertiary);
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.15s;
  }
  .screen-tab:hover { color: var(--text-secondary); }
  .screen-tab.active {
    color: var(--blue);
    border-bottom-color: var(--blue);
    font-weight: 600;
  }

  /* Screen container */
  .screen {
    display: none;
    flex: 1;
  }
  .screen.active { display: flex; flex-direction: column; }
  .screen-body {
    flex: 1;
    padding: 28px 32px;
    max-width: 1200px;
    width: 100%;
    margin: 0 auto;
  }

  /* ========== DASHBOARD SCREEN ========== */
  .dash-header {
    margin-bottom: 28px;
  }
  .dash-header h2 {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text-primary);
  }
  .dash-header p {
    color: var(--text-secondary);
    font-size: 0.85rem;
    margin-top: 3px;
  }

  .dash-alerts {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 28px;
  }
  .alert-card {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 18px;
    border-radius: var(--radius-md);
    font-size: 0.82rem;
  }
  .alert-card.urgent {
    background: var(--red-light);
    border: 1px solid #f5c6c6;
    color: #7f1d1d;
  }
  .alert-card.warning {
    background: var(--yellow-light);
    border: 1px solid #f0e0a0;
    color: #723c0a;
  }
  .alert-card.info {
    background: var(--blue-light);
    border: 1px solid #c5d5f0;
    color: #1e3a6e;
  }
  .alert-icon {
    font-size: 1rem;
    flex-shrink: 0;
    width: 22px;
    text-align: center;
  }
  .alert-text { flex: 1; font-weight: 500; }
  .alert-action {
    font-size: 0.75rem;
    font-weight: 600;
    padding: 5px 12px;
    border-radius: var(--radius-sm);
    border: none;
    cursor: pointer;
  }
  .alert-card.urgent .alert-action { background: var(--red); color: white; }
  .alert-card.warning .alert-action { background: var(--yellow); color: white; }
  .alert-card.info .alert-action { background: var(--blue); color: white; }

  .dash-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 14px;
    margin-bottom: 28px;
  }
  .stat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 18px;
  }
  .stat-label {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-tertiary);
    margin-bottom: 6px;
  }
  .stat-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
  }
  .stat-sub {
    font-size: 0.72rem;
    color: var(--text-secondary);
    margin-top: 4px;
  }

  .dash-cols {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 18px;
  }
  .dash-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
  }
  .dash-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 18px 12px;
    border-bottom: 1px solid var(--border-light);
  }
  .dash-section-title {
    font-size: 0.82rem;
    font-weight: 600;
  }
  .dash-section-action {
    font-size: 0.72rem;
    color: var(--blue);
    font-weight: 500;
    cursor: pointer;
    text-decoration: none;
  }

  .task-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 18px;
    border-bottom: 1px solid var(--border-light);
    cursor: pointer;
    transition: background 0.1s;
  }
  .task-item:last-child { border-bottom: none; }
  .task-item:hover { background: var(--bg); }
  .task-check {
    width: 18px; height: 18px;
    border: 2px solid var(--border);
    border-radius: 4px;
    margin-top: 1px;
    flex-shrink: 0;
  }
  .task-content { flex: 1; min-width: 0; }
  .task-title {
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--text-primary);
  }
  .task-meta {
    font-size: 0.7rem;
    color: var(--text-tertiary);
    margin-top: 2px;
  }

  .case-mini {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 18px;
    border-bottom: 1px solid var(--border-light);
    cursor: pointer;
    transition: background 0.1s;
  }
  .case-mini:last-child { border-bottom: none; }
  .case-mini:hover { background: var(--bg); }
  .case-mini-stage {
    width: 4px;
    height: 36px;
    border-radius: 2px;
    flex-shrink: 0;
  }
  .case-mini-info { flex: 1; min-width: 0; }
  .case-mini-name {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-primary);
  }
  .case-mini-detail {
    font-size: 0.7rem;
    color: var(--text-tertiary);
    margin-top: 1px;
  }
  .case-mini-badge {
    font-size: 0.65rem;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
  }

  /* ========== CASES LIST ========== */
  .cases-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }
  .cases-header h2 { font-size: 1.2rem; font-weight: 700; }

  .cases-toolbar {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 18px;
  }
  .search-box {
    flex: 1;
    max-width: 360px;
    position: relative;
  }
  .search-box input {
    width: 100%;
    padding: 8px 12px 8px 34px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-family: var(--sans);
    background: var(--card);
    outline: none;
    transition: border-color 0.15s;
  }
  .search-box input:focus { border-color: var(--blue-muted); }
  .search-box .search-icon {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-tertiary);
    font-size: 0.82rem;
  }
  .filter-btn {
    padding: 8px 14px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 0.78rem;
    font-family: var(--sans);
    background: var(--card);
    color: var(--text-secondary);
    cursor: pointer;
    font-weight: 500;
  }
  .filter-btn:hover { border-color: var(--blue-muted); }
  .filter-btn.active {
    background: var(--blue-light);
    border-color: var(--blue-muted);
    color: var(--blue);
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
    font-weight: 600;
    font-family: var(--sans);
    cursor: pointer;
    border: none;
    transition: all 0.15s;
  }
  .btn-primary { background: var(--blue); color: white; }
  .btn-primary:hover { background: #2d5bc7; }
  .btn-outline {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-secondary);
  }
  .btn-outline:hover { border-color: var(--text-tertiary); }
  .btn-sm { padding: 5px 12px; font-size: 0.75rem; }

  .case-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 18px 20px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: flex-start;
    gap: 16px;
  }
  .case-card:hover {
    border-color: var(--blue-muted);
    box-shadow: var(--shadow-sm);
  }
  .case-stage-bar {
    width: 4px;
    min-height: 56px;
    border-radius: 2px;
    flex-shrink: 0;
    align-self: stretch;
  }
  .case-body { flex: 1; min-width: 0; }
  .case-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
  }
  .case-name {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-primary);
  }
  .case-subtitle {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    margin-top: 2px;
  }
  .case-chips {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
  }
  .chip {
    font-size: 0.68rem;
    font-weight: 600;
    padding: 3px 9px;
    border-radius: 10px;
    white-space: nowrap;
  }
  .chip-stage {
    color: white;
  }
  .chip-days-green { background: var(--green-light); color: var(--green); }
  .chip-days-yellow { background: var(--yellow-light); color: var(--yellow); }
  .chip-days-red { background: var(--red-light); color: var(--red); }

  .case-progress {
    margin-top: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .progress-bar {
    flex: 1;
    height: 5px;
    background: var(--border-light);
    border-radius: 3px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.3s;
  }
  .progress-label {
    font-size: 0.7rem;
    color: var(--text-tertiary);
    white-space: nowrap;
  }

  .case-next {
    margin-top: 10px;
    padding: 8px 12px;
    background: var(--blue-light);
    border: 1px solid #d6e2f5;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .next-label {
    font-size: 0.62rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--blue);
  }
  .next-text {
    font-size: 0.75rem;
    color: #2a4a7f;
  }

  /* ========== WORKSPACE ========== */
  .workspace { display: flex; flex-direction: column; flex: 1; }

  .ws-header {
    background: var(--card);
    border-bottom: 1px solid var(--border);
    padding: 16px 28px;
    display: flex;
    align-items: center;
    gap: 14px;
    flex-wrap: wrap;
  }
  .ws-back {
    font-size: 0.78rem;
    color: var(--text-tertiary);
    cursor: pointer;
    text-decoration: none;
    margin-right: 4px;
  }
  .ws-back:hover { color: var(--blue); }
  .ws-petitioner {
    font-size: 1.1rem;
    font-weight: 700;
  }
  .ws-meta {
    font-size: 0.75rem;
    color: var(--text-tertiary);
  }
  .ws-actions {
    margin-left: auto;
    display: flex;
    gap: 8px;
    align-items: center;
  }

  /* Stage stepper bar */
  .stage-stepper {
    background: var(--card);
    border-bottom: 1px solid var(--border);
    padding: 0 28px;
    display: flex;
    align-items: center;
    overflow-x: auto;
  }
  .stepper-step {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    font-size: 0.72rem;
    font-weight: 500;
    color: var(--text-tertiary);
    white-space: nowrap;
    position: relative;
    cursor: default;
  }
  .stepper-step::after {
    content: '‚Ä∫';
    margin-left: 8px;
    color: var(--border);
    font-size: 1rem;
  }
  .stepper-step:last-child::after { display: none; }
  .stepper-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--border);
    flex-shrink: 0;
  }
  .stepper-step.completed .stepper-dot { background: var(--green); }
  .stepper-step.completed { color: var(--green); }
  .stepper-step.current .stepper-dot {
    background: var(--blue);
    box-shadow: 0 0 0 3px var(--blue-light);
  }
  .stepper-step.current { color: var(--blue); font-weight: 600; }

  /* Stage-aware context bar */
  .stage-context {
    padding: 14px 28px;
    display: flex;
    align-items: center;
    gap: 14px;
    font-size: 0.8rem;
  }
  .stage-context.intake { background: #eef0ff; border-bottom: 1px solid #d5d9f5; }
  .stage-context.drafting { background: #f0ecff; border-bottom: 1px solid #d9d0f5; }
  .stage-context.review { background: var(--purple-light); border-bottom: 1px solid #ddd0f0; }
  .stage-context .context-icon { font-size: 1rem; }
  .stage-context .context-text { flex: 1; font-weight: 500; }
  .stage-context .context-progress {
    font-size: 0.72rem;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: var(--radius-sm);
    background: rgba(255,255,255,0.7);
  }

  /* Workspace panels */
  .ws-panels {
    display: flex;
    flex: 1;
    min-height: 0;
  }

  /* Left: Doc list / Checklist */
  .ws-left {
    width: 260px;
    min-width: 260px;
    border-right: 1px solid var(--border);
    background: var(--card);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }
  .panel-header {
    padding: 14px 16px 10px;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .panel-title {
    font-size: 0.68rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    color: var(--text-tertiary);
  }
  .panel-action {
    font-size: 0.7rem;
    color: var(--blue);
    font-weight: 500;
    cursor: pointer;
  }

  .checklist-group {
    padding: 12px 16px 8px;
  }
  .checklist-group-title {
    font-size: 0.68rem;
    font-weight: 700;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .checklist-item {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 6px 0;
    font-size: 0.78rem;
    cursor: pointer;
  }
  .checklist-item:hover { color: var(--blue); }
  .check-icon {
    width: 16px; height: 16px;
    border-radius: 4px;
    border: 1.5px solid var(--border);
    flex-shrink: 0;
    margin-top: 1px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6rem;
  }
  .check-icon.done {
    background: var(--green);
    border-color: var(--green);
    color: white;
  }
  .check-icon.partial {
    border-color: var(--yellow);
    color: var(--yellow);
  }

  .doc-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 16px;
    border-bottom: 1px solid var(--border-light);
    cursor: pointer;
    transition: background 0.1s;
  }
  .doc-item:hover { background: var(--bg); }
  .doc-item.selected { background: var(--blue-light); }
  .doc-status-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .doc-item-info { flex: 1; min-width: 0; }
  .doc-item-name {
    font-size: 0.78rem;
    font-weight: 500;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .doc-item-meta {
    font-size: 0.68rem;
    color: var(--text-tertiary);
    margin-top: 1px;
  }

  /* Center: Preview / Editor */
  .ws-center {
    flex: 1;
    min-width: 0;
    background: var(--bg);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24px;
  }
  .doc-preview {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    width: 100%;
    max-width: 680px;
    padding: 40px 48px;
    box-shadow: var(--shadow-sm);
    min-height: 600px;
  }
  .doc-court-header {
    text-align: center;
    margin-bottom: 28px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--text-primary);
  }
  .doc-court-name {
    font-family: var(--serif);
    font-size: 0.82rem;
    font-weight: 700;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--text-primary);
  }
  .doc-court-district {
    font-family: var(--serif);
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-top: 4px;
  }
  .doc-case-caption {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 16px 0;
    border-bottom: 1px solid var(--text-primary);
    margin-bottom: 24px;
  }
  .caption-left {
    font-family: var(--serif);
    font-size: 0.85rem;
    line-height: 1.6;
  }
  .caption-right {
    text-align: right;
    font-family: var(--serif);
    font-size: 0.82rem;
  }
  .caption-case-no {
    font-weight: 600;
  }
  .doc-section { margin-bottom: 20px; }
  .doc-section-title {
    font-family: var(--serif);
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-secondary);
    text-align: center;
    margin-bottom: 12px;
  }
  .doc-section-body {
    font-family: var(--serif);
    font-size: 0.88rem;
    line-height: 1.7;
    color: var(--text-primary);
  }
  .var-filled {
    background: var(--green-light);
    padding: 1px 5px;
    border-radius: 3px;
    border-bottom: 2px solid #86d4a8;
    cursor: pointer;
    transition: background 0.1s;
  }
  .var-filled:hover { background: #c8ebd5; }
  .var-empty {
    background: var(--yellow-light);
    padding: 1px 5px;
    border-radius: 3px;
    border-bottom: 2px solid #e4c65a;
    font-family: var(--mono);
    font-size: 0.78rem;
    color: var(--yellow);
    cursor: pointer;
    transition: background 0.1s;
  }
  .var-empty:hover { background: #f5e9c0; }

  /* Right: Variables panel */
  .ws-right {
    width: 300px;
    min-width: 300px;
    border-left: 1px solid var(--border);
    background: var(--card);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }
  .var-section {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-light);
  }
  .var-section-title {
    font-size: 0.68rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-tertiary);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .var-section-count {
    font-weight: 500;
    color: var(--text-tertiary);
    font-size: 0.62rem;
  }
  .var-field {
    margin-bottom: 10px;
  }
  .var-label {
    font-size: 0.7rem;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 4px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .var-label .filled-check {
    color: var(--green);
    font-size: 0.68rem;
    font-weight: 600;
  }
  .var-label .empty-warn {
    color: var(--yellow);
    font-size: 0.68rem;
    font-weight: 600;
  }
  .var-input {
    width: 100%;
    padding: 7px 10px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 0.78rem;
    font-family: var(--sans);
    background: var(--bg);
    outline: none;
    transition: border-color 0.15s;
  }
  .var-input:focus {
    border-color: var(--blue-muted);
    background: white;
  }
  .var-input.filled { border-color: #b8dcc8; }
  .var-input-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239d9a93' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px center;
    padding-right: 30px;
  }
  .var-input-date {
    font-family: var(--sans);
  }

  /* ========== REVIEW MODE OVERLAY ========== */
  .review-sidebar {
    display: none;
  }
  .review-sidebar.active {
    display: flex;
    flex-direction: column;
  }
  .review-comment {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-light);
  }
  .review-comment-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
  }
  .review-section-name {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--purple);
  }
  .review-status {
    font-size: 0.62rem;
    font-weight: 600;
    padding: 2px 7px;
    border-radius: 8px;
    background: var(--purple-light);
    color: var(--purple);
  }
  .review-comment-body {
    font-size: 0.78rem;
    color: var(--text-secondary);
    line-height: 1.5;
  }
  .review-comment-meta {
    font-size: 0.68rem;
    color: var(--text-tertiary);
    margin-top: 4px;
    display: flex;
    justify-content: space-between;
  }
  .resolve-btn {
    color: var(--green);
    font-weight: 600;
    cursor: pointer;
  }

  /* ========== PIPELINE ========== */
  .pipeline-header {
    padding: 20px 28px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .pipeline-header h2 { font-size: 1.2rem; font-weight: 700; }
  .pipeline-board {
    display: flex;
    gap: 12px;
    padding: 0 28px 28px;
    overflow-x: auto;
    flex: 1;
    align-items: flex-start;
  }
  .pipeline-col {
    width: 220px;
    min-width: 220px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    overflow: hidden;
    flex-shrink: 0;
  }
  .pipeline-col-header {
    padding: 12px 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    border-bottom: 2px solid var(--border);
    background: var(--card);
  }
  .pipeline-col-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .pipeline-col-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
  }
  .pipeline-col-count {
    margin-left: auto;
    font-size: 0.68rem;
    font-weight: 600;
    color: var(--text-tertiary);
    background: var(--bg);
    padding: 1px 7px;
    border-radius: 8px;
  }
  .pipeline-col-body {
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-height: 60px;
  }
  .pipeline-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 10px 12px;
    cursor: pointer;
    transition: all 0.15s;
    border-left: 3px solid var(--border);
  }
  .pipeline-card:hover {
    border-color: var(--blue-muted);
    box-shadow: var(--shadow-sm);
  }
  .pipeline-card-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
  }
  .pipeline-card-chips {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
  }
  .pipeline-chip {
    font-size: 0.6rem;
    font-weight: 600;
    padding: 1px 6px;
    border-radius: 6px;
  }

  /* ========== SCREEN TRANSITIONS ========== */
  .screen-tab-bar {
    display: flex;
    gap: 2px;
    border-bottom: 1px solid var(--border);
    background: white;
    padding: 0 28px;
    position: sticky;
    top: 0;
    z-index: 50;
  }
  .tab-btn {
    padding: 11px 16px;
    font-size: 0.78rem;
    font-weight: 500;
    color: var(--text-tertiary);
    cursor: pointer;
    border: none;
    background: none;
    border-bottom: 2px solid transparent;
    font-family: var(--sans);
    transition: all 0.15s;
  }
  .tab-btn:hover { color: var(--text-secondary); }
  .tab-btn.active {
    color: var(--blue);
    border-bottom-color: var(--blue);
    font-weight: 600;
  }

  /* ========== INTAKE FORM VIEW ========== */
  .intake-form {
    max-width: 680px;
    width: 100%;
    margin: 0 auto;
    padding: 28px;
  }
  .intake-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 24px;
    margin-bottom: 16px;
  }
  .intake-section-title {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .intake-section-desc {
    font-size: 0.75rem;
    color: var(--text-tertiary);
    margin-bottom: 16px;
  }
  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }
  .form-field { display: flex; flex-direction: column; gap: 4px; }
  .form-field.full-width { grid-column: 1 / -1; }
  .form-label {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--text-secondary);
  }
  .form-input {
    padding: 9px 12px;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 0.82rem;
    font-family: var(--sans);
    background: white;
    outline: none;
    transition: border-color 0.15s;
  }
  .form-input:focus { border-color: var(--blue-muted); }
  .form-input::placeholder { color: var(--text-tertiary); }

  .cascade-preview {
    background: var(--blue-light);
    border: 1px solid #c5d5f0;
    border-radius: var(--radius-md);
    padding: 16px 18px;
    margin-top: 12px;
  }
  .cascade-label {
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--blue);
    margin-bottom: 10px;
  }
  .cascade-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px 20px;
  }
  .cascade-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.72rem;
  }
  .cascade-key { color: var(--text-tertiary); }
  .cascade-val { font-weight: 500; color: var(--text-primary); }

  /* ========== UTILITY ========== */
  .text-green { color: var(--green); }
  .text-yellow { color: var(--yellow); }
  .text-red { color: var(--red); }
  .text-blue { color: var(--blue); }
  .text-purple { color: var(--purple); }
  .bg-green { background: var(--green); }
  .bg-yellow { background: var(--yellow); }
  .bg-red { background: var(--red); }
  .bg-blue { background: var(--blue); }
  .bg-purple { background: var(--purple); }
  .bg-gray { background: var(--stage-resolved); }

  .hidden { display: none !important; }

  /* View toggle between workspace sub-views */
  .ws-subview { display: none; }
  .ws-subview.active { display: flex; flex: 1; }

  .ws-subview-intake.active { display: block; }

  /* ========== RESPONSIVE POLISH ========== */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: var(--text-tertiary); }

  /* Annotation highlight for review mode */
  .doc-section.annotated {
    position: relative;
    border-left: 3px solid var(--purple);
    padding-left: 12px;
    margin-left: -15px;
  }
  .annotation-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    width: 20px; height: 20px;
    border-radius: 50%;
    background: var(--purple);
    color: white;
    font-size: 0.6rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Stage advance banner */
  .advance-banner {
    margin: 0 28px 0;
    padding: 12px 18px;
    background: var(--green-light);
    border: 1px solid #b3dcc5;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 14px;
  }
  .advance-banner-text {
    flex: 1;
    font-size: 0.8rem;
    font-weight: 500;
    color: #1a5e3a;
  }

  /* Welcome empty state */
  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
  }
  .empty-state-icon {
    font-size: 2.5rem;
    margin-bottom: 16px;
    opacity: 0.4;
  }
  .empty-state-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 6px;
  }
  .empty-state-desc {
    font-size: 0.82rem;
    color: var(--text-tertiary);
    max-width: 340px;
    line-height: 1.5;
    margin-bottom: 16px;
  }
</style>
</head>
<body>
  <div class="app">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <h1>Habeas</h1>
        <div class="status"><span class="status-dot"></span> Connected</div>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section-label">Overview</div>
        <a class="nav-item active" data-screen="dashboard" onclick="showScreen('dashboard')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
          Dashboard
        </a>
        <a class="nav-item" data-screen="cases" onclick="showScreen('cases')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          My Cases
          <span class="nav-badge">12</span>
        </a>
        <a class="nav-item" data-screen="pipeline" onclick="showScreen('pipeline')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
          Pipeline
        </a>

        <div class="nav-section-label">Library</div>
        <a class="nav-item" data-screen="templates" onclick="showScreen('templates')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          Templates
        </a>

        <div class="nav-section-label">Alerts</div>
        <a class="nav-item" onclick="showScreen('dashboard')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
          Needs Attention
          <span class="nav-badge alert">3</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <div class="sidebar-user">
          <div class="user-avatar">SK</div>
          <div class="user-info">
            <div class="user-name">Sarah Kim</div>
            <div class="user-role">Attorney</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- ===== MAIN ===== -->
    <main class="main">

      <!-- ======================================= -->
      <!-- SCREEN: DASHBOARD                       -->
      <!-- ======================================= -->
      <div class="screen active" id="screen-dashboard">
        <div class="screen-body">
          <div class="dash-header">
            <h2>Good morning, Sarah</h2>
            <p>Tuesday, February 17 ‚Äî 3 items need your attention</p>
          </div>

          <div class="dash-alerts">
            <div class="alert-card urgent">
              <span class="alert-icon">‚ö†</span>
              <span class="alert-text"><strong>Garcia, Maria</strong> ‚Äî 14 days in Drafting, 3 empty variables blocking filing</span>
              <button class="alert-action" onclick="showScreen('workspace')">Open case ‚Üí</button>
            </div>
            <div class="alert-card warning">
              <span class="alert-icon">‚è±</span>
              <span class="alert-text"><strong>2 documents</strong> awaiting your review ‚Äî oldest is 4 days</span>
              <button class="alert-action" onclick="showScreen('workspace')">Review ‚Üí</button>
            </div>
            <div class="alert-card info">
              <span class="alert-icon">üìã</span>
              <span class="alert-text"><strong>Chen, Wei</strong> ‚Äî all docs ready, eligible to advance to Filing</span>
              <button class="alert-action" onclick="showScreen('workspace')">Advance ‚Üí</button>
            </div>
          </div>

          <div class="dash-stats">
            <div class="stat-card">
              <div class="stat-label">Active Cases</div>
              <div class="stat-value">12</div>
              <div class="stat-sub">3 in review</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Avg. Days to File</div>
              <div class="stat-value">8.2</div>
              <div class="stat-sub" style="color:var(--green);">‚Üì 1.5 from last month</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Docs Ready</div>
              <div class="stat-value">34<span style="font-size:0.9rem;color:var(--text-tertiary);">/41</span></div>
              <div class="stat-sub">83% completion</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Stale Cases</div>
              <div class="stat-value" style="color:var(--red);">2</div>
              <div class="stat-sub">&gt;10 days without update</div>
            </div>
          </div>

          <div class="dash-cols">
            <div class="dash-section">
              <div class="dash-section-header">
                <div class="dash-section-title">Your Next Actions</div>
                <a class="dash-section-action" onclick="showScreen('cases')">All cases ‚Üí</a>
              </div>
              <div class="task-item" onclick="showScreen('workspace')">
                <div class="check-icon partial">‚Äî</div>
                <div class="task-content">
                  <div class="task-title">Review petition for Okafor, Emeka</div>
                  <div class="task-meta">Attorney Review ¬∑ 2 comments pending ¬∑ 3 days</div>
                </div>
              </div>
              <div class="task-item" onclick="showScreen('workspace')">
                <div class="check-icon partial">‚Äî</div>
                <div class="task-content">
                  <div class="task-title">Fill AUSA info for Ramirez, Luis</div>
                  <div class="task-meta">Drafting ¬∑ 2 variables empty ¬∑ opposing counsel section</div>
                </div>
              </div>
              <div class="task-item" onclick="showScreen('workspace')">
                <div class="check-icon"></div>
                <div class="task-content">
                  <div class="task-title">Approve bond motion for Chen, Wei</div>
                  <div class="task-meta">Attorney Review ¬∑ all variables filled ¬∑ 1 day</div>
                </div>
              </div>
              <div class="task-item" onclick="showScreen('workspace')">
                <div class="check-icon"></div>
                <div class="task-content">
                  <div class="task-title">Add habeas petition for Petrov, Ivan</div>
                  <div class="task-meta">Intake ¬∑ no documents assigned yet</div>
                </div>
              </div>
            </div>

            <div class="dash-section">
              <div class="dash-section-header">
                <div class="dash-section-title">Cases Needing Attention</div>
                <a class="dash-section-action" onclick="showScreen('pipeline')">Pipeline ‚Üí</a>
              </div>
              <div class="case-mini" onclick="showScreen('workspace')">
                <div class="case-mini-stage" style="background:var(--red)"></div>
                <div class="case-mini-info">
                  <div class="case-mini-name">Garcia, Maria</div>
                  <div class="case-mini-detail">Stewart Det. Ctr. ¬∑ 4th Cir. ¬∑ Drafting</div>
                </div>
                <div class="case-mini-badge chip-days-red">14d</div>
              </div>
              <div class="case-mini" onclick="showScreen('workspace')">
                <div class="case-mini-stage" style="background:var(--yellow)"></div>
                <div class="case-mini-info">
                  <div class="case-mini-name">Nguyen, Thanh</div>
                  <div class="case-mini-detail">Eloy Det. Ctr. ¬∑ 9th Cir. ¬∑ Attorney Review</div>
                </div>
                <div class="case-mini-badge chip-days-yellow">8d</div>
              </div>
              <div class="case-mini" onclick="showScreen('workspace')">
                <div class="case-mini-stage" style="background:var(--stage-resolved)"></div>
                <div class="case-mini-info">
                  <div class="case-mini-name">Abdi, Hassan</div>
                  <div class="case-mini-detail">Adelanto ICE ¬∑ 9th Cir. ¬∑ Intake</div>
                </div>
                <div class="case-mini-badge chip-days-yellow">7d</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ======================================= -->
      <!-- SCREEN: CASES LIST                      -->
      <!-- ======================================= -->
      <div class="screen" id="screen-cases">
        <div class="screen-body">
          <div class="cases-header">
            <div>
              <h2>My Cases</h2>
              <p style="font-size:0.82rem;color:var(--text-secondary);margin-top:2px;">12 active cases ¬∑ 3 awaiting review</p>
            </div>
            <button class="btn btn-primary" onclick="showScreen('intake')">+ New Case</button>
          </div>

          <div class="cases-toolbar">
            <div class="search-box">
              <span class="search-icon">‚åï</span>
              <input type="text" placeholder="Search cases by name, facility, or A-number‚Ä¶" />
            </div>
            <button class="filter-btn active">All</button>
            <button class="filter-btn">Intake</button>
            <button class="filter-btn">Drafting</button>
            <button class="filter-btn">Review</button>
            <button class="filter-btn">Filed+</button>
          </div>

          <!-- Case Card 1 -->
          <div class="case-card" onclick="showScreen('workspace')">
            <div class="case-stage-bar" style="background:var(--stage-review);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Okafor, Emeka</div>
                  <div class="case-subtitle">Irwin County Det. Ctr. ¬∑ 11th Cir. ¬∑ A# 216-xxx-xxx</div>
                </div>
                <div class="case-chips">
                  <span class="chip chip-days-green">3d</span>
                  <span class="chip chip-stage" style="background:var(--stage-review);">Attorney Review</span>
                </div>
              </div>
              <div class="case-progress">
                <div class="progress-bar"><div class="progress-fill bg-blue" style="width:75%;"></div></div>
                <span class="progress-label">3/4 docs ready</span>
              </div>
              <div class="case-next">
                <span class="next-label">Next ‚Üí</span>
                <span class="next-text">Review petition ‚Äî 2 comments from paralegal need resolution</span>
              </div>
            </div>
          </div>

          <!-- Case Card 2 -->
          <div class="case-card" onclick="showScreen('workspace')">
            <div class="case-stage-bar" style="background:var(--stage-drafting);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Garcia, Maria</div>
                  <div class="case-subtitle">Stewart Det. Ctr. ¬∑ 4th Cir. ¬∑ A# 098-xxx-xxx</div>
                </div>
                <div class="case-chips">
                  <span class="chip chip-days-red">14d</span>
                  <span class="chip chip-stage" style="background:var(--stage-drafting);">Drafting</span>
                </div>
              </div>
              <div class="case-progress">
                <div class="progress-bar"><div class="progress-fill bg-yellow" style="width:40%;"></div></div>
                <span class="progress-label">2/5 docs ready</span>
              </div>
              <div class="case-next">
                <span class="next-label">Next ‚Üí</span>
                <span class="next-text">Fill 3 empty variables in petition (AUSA_NAME, AUSA_PHONE, FILING_DATE)</span>
              </div>
            </div>
          </div>

          <!-- Case Card 3 -->
          <div class="case-card" onclick="showScreen('workspace')">
            <div class="case-stage-bar" style="background:var(--stage-ready);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Chen, Wei</div>
                  <div class="case-subtitle">Aurora ICE ¬∑ 10th Cir. ¬∑ A# 312-xxx-xxx</div>
                </div>
                <div class="case-chips">
                  <span class="chip chip-days-green">2d</span>
                  <span class="chip chip-stage" style="background:var(--stage-ready);">Ready to File</span>
                </div>
              </div>
              <div class="case-progress">
                <div class="progress-bar"><div class="progress-fill bg-green" style="width:100%;"></div></div>
                <span class="progress-label">4/4 docs ready</span>
              </div>
              <div class="case-next">
                <span class="next-label">Next ‚Üí</span>
                <span class="next-text">All documents ready ‚Äî export packet and file with court</span>
              </div>
            </div>
          </div>

          <!-- Case Card 4 -->
          <div class="case-card" onclick="showScreen('workspace')">
            <div class="case-stage-bar" style="background:var(--stage-intake);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Petrov, Ivan</div>
                  <div class="case-subtitle">Tacoma ICE ¬∑ 9th Cir. ¬∑ A# 445-xxx-xxx</div>
                </div>
                <div class="case-chips">
                  <span class="chip chip-days-green">1d</span>
                  <span class="chip chip-stage" style="background:var(--stage-intake);">Intake</span>
                </div>
              </div>
              <div class="case-progress">
                <div class="progress-bar"><div class="progress-fill bg-blue" style="width:0%;"></div></div>
                <span class="progress-label">0/0 docs</span>
              </div>
              <div class="case-next">
                <span class="next-label">Next ‚Üí</span>
                <span class="next-text">Complete client intake ‚Äî assign document templates for this case</span>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- ======================================= -->
      <!-- SCREEN: WORKSPACE (Case Detail)         -->
      <!-- ======================================= -->
      <div class="screen" id="screen-workspace">
        <div class="workspace">
          <!-- WS Header -->
          <div class="ws-header">
            <a class="ws-back" onclick="showScreen('cases')">‚Üê My Cases</a>
            <span class="ws-petitioner">Okafor, Emeka</span>
            <span class="chip chip-stage" style="background:var(--stage-review);font-size:0.7rem;">Attorney Review</span>
            <span class="ws-meta">11th Cir. ¬∑ Irwin County Det. Ctr. ¬∑ A# 216-xxx-xxx</span>
            <div class="ws-actions">
              <button class="btn btn-outline btn-sm" onclick="toggleWsView('review')">‚ò∑ Review Mode</button>
              <button class="btn btn-outline btn-sm">Advance Stage ‚Üí</button>
              <button class="btn btn-primary btn-sm">‚Üì Export</button>
            </div>
          </div>

          <!-- Stage Stepper -->
          <div class="stage-stepper">
            <div class="stepper-step completed"><span class="stepper-dot"></span> Intake</div>
            <div class="stepper-step completed"><span class="stepper-dot"></span> Drafting</div>
            <div class="stepper-step current"><span class="stepper-dot"></span> Attorney Review</div>
            <div class="stepper-step"><span class="stepper-dot"></span> Ready to File</div>
            <div class="stepper-step"><span class="stepper-dot"></span> Filed</div>
            <div class="stepper-step"><span class="stepper-dot"></span> Awaiting Response</div>
            <div class="stepper-step"><span class="stepper-dot"></span> Resolved</div>
          </div>

          <!-- Stage Context Bar -->
          <div class="stage-context review">
            <span class="context-icon">üîç</span>
            <span class="context-text">Attorney Review ‚Äî verify all document content and approve for filing</span>
            <span class="context-progress">3 of 4 approved</span>
          </div>

          <!-- WS Sub-view: Document Editor (default) -->
          <div class="ws-subview active" id="wsview-editor" style="display:flex;flex:1;min-height:0;">
            <!-- Left Panel -->
            <div class="ws-left">
              <div class="panel-header">
                <span class="panel-title">Case Documents</span>
                <span class="panel-action">+ Add</span>
              </div>

              <div class="doc-item selected">
                <div class="doc-status-dot bg-purple"></div>
                <div class="doc-item-info">
                  <div class="doc-item-name">Habeas Petition (¬ß2241)</div>
                  <div class="doc-item-meta">In Review ¬∑ 2 comments</div>
                </div>
              </div>
              <div class="doc-item">
                <div class="doc-status-dot bg-green"></div>
                <div class="doc-item-info">
                  <div class="doc-item-name">Memorandum of Law</div>
                  <div class="doc-item-meta">Ready</div>
                </div>
              </div>
              <div class="doc-item">
                <div class="doc-status-dot bg-green"></div>
                <div class="doc-item-info">
                  <div class="doc-item-name">Declaration of Petitioner</div>
                  <div class="doc-item-meta">Ready</div>
                </div>
              </div>
              <div class="doc-item">
                <div class="doc-status-dot bg-green"></div>
                <div class="doc-item-info">
                  <div class="doc-item-name">Proposed Order</div>
                  <div class="doc-item-meta">Ready</div>
                </div>
              </div>

              <div style="padding:16px;border-top:1px solid var(--border-light);">
                <div class="panel-title" style="margin-bottom:10px;">Checklist</div>
                <div class="checklist-item"><div class="check-icon done">‚úì</div> Client info complete</div>
                <div class="checklist-item"><div class="check-icon done">‚úì</div> All variables filled</div>
                <div class="checklist-item"><div class="check-icon done">‚úì</div> Templates assigned</div>
                <div class="checklist-item"><div class="check-icon partial">‚Äî</div> All docs approved</div>
                <div class="checklist-item"><div class="check-icon"></div> Packet exported</div>
              </div>
            </div>

            <!-- Center Panel: Document Preview -->
            <div class="ws-center">
              <div class="doc-preview">
                <div class="doc-court-header">
                  <div class="doc-court-name">United States District Court</div>
                  <div class="doc-court-district">for the Southern District of Georgia</div>
                </div>

                <div class="doc-case-caption">
                  <div class="caption-left">
                    <span class="var-filled">Emeka Okafor</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;Petitioner,<br><br>
                    v.<br><br>
                    <span class="var-filled">Warden John Mitchell</span>,<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;Respondent.
                  </div>
                  <div class="caption-right">
                    <div class="caption-case-no">Case No. <span class="var-empty">{{CASE_NUMBER}}</span></div>
                    <div style="margin-top:8px;font-size:0.78rem;color:var(--text-secondary);">
                      PETITION FOR WRIT OF<br>HABEAS CORPUS UNDER<br>28 U.S.C. ¬ß 2241
                    </div>
                  </div>
                </div>

                <div class="doc-section annotated">
                  <div class="annotation-badge">2</div>
                  <div class="doc-section-title">I. Jurisdiction & Venue</div>
                  <div class="doc-section-body">
                    This Court has jurisdiction under 28 U.S.C. ¬ß 2241. Petitioner <span class="var-filled">Emeka Okafor</span> is currently detained at <span class="var-filled">Irwin County Detention Center</span> in <span class="var-filled">Ocilla, Georgia</span>, which is within the territorial jurisdiction of this Court. Petitioner has been held in custody for <span class="var-filled">127</span> days pursuant to <span class="var-filled">¬ß 1226(a)</span> of the Immigration and Nationality Act without a bond hearing before an Immigration Judge.
                  </div>
                </div>

                <div class="doc-section">
                  <div class="doc-section-title">II. Parties</div>
                  <div class="doc-section-body">
                    Petitioner is a <span class="var-filled">38</span>-year-old citizen of <span class="var-filled">Nigeria</span> who has resided in the United States for approximately <span class="var-filled">12</span> years. Respondent <span class="var-filled">Warden John Mitchell</span> is the custodian of Petitioner at <span class="var-filled">Irwin County Detention Center</span>, a facility operated by <span class="var-filled">LaSalle Corrections</span> under contract with U.S. Immigration and Customs Enforcement.
                  </div>
                </div>

                <div class="doc-section">
                  <div class="doc-section-title">III. Statement of Facts</div>
                  <div class="doc-section-body">
                    Petitioner was apprehended by ICE officers on <span class="var-filled">October 14, 2024</span> at <span class="var-filled">his residence in Atlanta, Georgia</span>. Since that date, Petitioner has been detained continuously without a hearing on the appropriateness of his continued detention. Petitioner has <span class="var-filled">no criminal history</span> and has strong <span class="var-filled">community ties including U.S. citizen children and steady employment as an accountant for 8 years</span>.
                  </div>
                </div>
              </div>
            </div>

            <!-- Right Panel: Variables (proper form inputs) -->
            <div class="ws-right" id="ws-right-vars">
              <div class="panel-header">
                <span class="panel-title">Case Variables</span>
                <span style="font-size:0.7rem;color:var(--text-tertiary);">18/19 filled</span>
              </div>

              <div class="var-section">
                <div class="var-section-title">
                  Petitioner
                  <span class="var-section-count">6/6 ‚úì</span>
                </div>
                <div class="var-field">
                  <div class="var-label">Full Name <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="text" value="Emeka Okafor" />
                </div>
                <div class="var-field">
                  <div class="var-label">Country of Origin <span class="filled-check">‚úì</span></div>
                  <select class="var-input var-input-select filled">
                    <option>Nigeria</option>
                    <option>Guatemala</option>
                    <option>Honduras</option>
                    <option>Mexico</option>
                  </select>
                </div>
                <div class="var-field">
                  <div class="var-label">Age <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="number" value="38" />
                </div>
                <div class="var-field">
                  <div class="var-label">Residence Years <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="number" value="12" />
                </div>
                <div class="var-field">
                  <div class="var-label">Criminal History <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="text" value="no criminal history" />
                </div>
                <div class="var-field">
                  <div class="var-label">Community Ties <span class="filled-check">‚úì</span></div>
                  <textarea class="var-input filled" rows="2" style="resize:vertical;">community ties including U.S. citizen children and steady employment as an accountant for 8 years</textarea>
                </div>
              </div>

              <div class="var-section">
                <div class="var-section-title">
                  Detention
                  <span class="var-section-count">5/5 ‚úì</span>
                </div>
                <div class="var-field">
                  <div class="var-label">Facility <span class="filled-check">‚úì auto</span></div>
                  <input class="var-input filled" type="text" value="Irwin County Detention Center" readonly style="opacity:0.7;" />
                </div>
                <div class="var-field">
                  <div class="var-label">Location <span class="filled-check">‚úì auto</span></div>
                  <input class="var-input filled" type="text" value="Ocilla, Georgia" readonly style="opacity:0.7;" />
                </div>
                <div class="var-field">
                  <div class="var-label">Days Detained <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="number" value="127" />
                </div>
                <div class="var-field">
                  <div class="var-label">Apprehension Date <span class="filled-check">‚úì</span></div>
                  <input class="var-input var-input-date filled" type="date" value="2024-10-14" />
                </div>
                <div class="var-field">
                  <div class="var-label">Detention Statute <span class="filled-check">‚úì</span></div>
                  <select class="var-input var-input-select filled">
                    <option>¬ß 1226(a) ‚Äî General Detention</option>
                    <option>¬ß 1226(c) ‚Äî Mandatory Detention</option>
                    <option>¬ß 1231(a)(6) ‚Äî Post-Order</option>
                  </select>
                </div>
              </div>

              <div class="var-section">
                <div class="var-section-title">
                  Court
                  <span class="var-section-count" style="color:var(--yellow);">3/4 ‚ö†</span>
                </div>
                <div class="var-field">
                  <div class="var-label">District <span class="filled-check">‚úì auto</span></div>
                  <input class="var-input filled" type="text" value="Southern District of Georgia" readonly style="opacity:0.7;" />
                </div>
                <div class="var-field">
                  <div class="var-label">Warden <span class="filled-check">‚úì auto</span></div>
                  <input class="var-input filled" type="text" value="Warden John Mitchell" readonly style="opacity:0.7;" />
                </div>
                <div class="var-field">
                  <div class="var-label">Operator <span class="filled-check">‚úì auto</span></div>
                  <input class="var-input filled" type="text" value="LaSalle Corrections" readonly style="opacity:0.7;" />
                </div>
                <div class="var-field">
                  <div class="var-label">Case Number <span class="empty-warn">empty</span></div>
                  <input class="var-input" type="text" placeholder="e.g. 7:24-cv-00123" />
                </div>
              </div>

              <div class="var-section">
                <div class="var-section-title">
                  Officials & Counsel
                  <span class="var-section-count">4/4 ‚úì</span>
                </div>
                <div class="var-field">
                  <div class="var-label">FOD <span class="filled-check">‚úì auto</span></div>
                  <input class="var-input filled" type="text" value="Dir. Sean Gallagher" readonly style="opacity:0.7;" />
                </div>
                <div class="var-field">
                  <div class="var-label">Lead Attorney <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="text" value="Sarah Kim, Esq." />
                </div>
                <div class="var-field">
                  <div class="var-label">AUSA Name <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="text" value="Michael Torres" />
                </div>
                <div class="var-field">
                  <div class="var-label">AUSA Phone <span class="filled-check">‚úì</span></div>
                  <input class="var-input filled" type="tel" value="(912) 555-0142" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ======================================= -->
      <!-- SCREEN: INTAKE (New Case)               -->
      <!-- ======================================= -->
      <div class="screen" id="screen-intake">
        <div class="workspace">
          <div class="ws-header">
            <a class="ws-back" onclick="showScreen('cases')">‚Üê My Cases</a>
            <span class="ws-petitioner">New Case Intake</span>
            <div class="ws-actions">
              <button class="btn btn-outline btn-sm" onclick="showScreen('cases')">Cancel</button>
              <button class="btn btn-primary btn-sm" onclick="showScreen('workspace')">Create & Open ‚Üí</button>
            </div>
          </div>

          <!-- Stepped progress -->
          <div class="stage-stepper">
            <div class="stepper-step current"><span class="stepper-dot"></span> 1. Client Info</div>
            <div class="stepper-step"><span class="stepper-dot"></span> 2. Detention Details</div>
            <div class="stepper-step"><span class="stepper-dot"></span> 3. Assign Documents</div>
          </div>

          <div class="ws-subview-intake active" style="display:block;overflow-y:auto;">
            <div class="intake-form">
              <div class="intake-section">
                <div class="intake-section-title">Client Information</div>
                <div class="intake-section-desc">Basic petitioner details. Required fields marked with *.</div>
                <div class="form-grid">
                  <div class="form-field">
                    <label class="form-label">Last Name *</label>
                    <input class="form-input" type="text" placeholder="e.g. Garcia" />
                  </div>
                  <div class="form-field">
                    <label class="form-label">First Name *</label>
                    <input class="form-input" type="text" placeholder="e.g. Maria" />
                  </div>
                  <div class="form-field">
                    <label class="form-label">Country of Origin</label>
                    <select class="form-input var-input-select">
                      <option value="">Select country‚Ä¶</option>
                      <option>Guatemala</option>
                      <option>Honduras</option>
                      <option>Mexico</option>
                      <option>Nigeria</option>
                      <option>El Salvador</option>
                    </select>
                  </div>
                  <div class="form-field">
                    <label class="form-label">A-Number</label>
                    <input class="form-input" type="text" placeholder="A# xxx-xxx-xxx" />
                  </div>
                </div>
              </div>

              <div class="intake-section">
                <div class="intake-section-title">Detention Facility</div>
                <div class="intake-section-desc">Selecting a facility auto-populates warden, court, and jurisdiction details.</div>
                <div class="form-grid">
                  <div class="form-field full-width">
                    <label class="form-label">Search Facility *</label>
                    <input class="form-input" type="text" placeholder="Start typing facility name‚Ä¶" value="Stewart Detention" />
                  </div>
                  <div class="form-field">
                    <label class="form-label">Detention Statute</label>
                    <select class="form-input var-input-select">
                      <option>¬ß 1226(a) ‚Äî General Detention</option>
                      <option>¬ß 1226(c) ‚Äî Mandatory Detention</option>
                      <option>¬ß 1231(a)(6) ‚Äî Post-Order</option>
                    </select>
                  </div>
                  <div class="form-field">
                    <label class="form-label">Lead Attorney</label>
                    <select class="form-input var-input-select">
                      <option>Sarah Kim, Esq.</option>
                      <option>David Park, Esq.</option>
                    </select>
                  </div>
                </div>

                <div class="cascade-preview">
                  <div class="cascade-label">‚ö° Auto-populated from Stewart Detention Center</div>
                  <div class="cascade-grid">
                    <div class="cascade-item"><span class="cascade-key">Warden</span><span class="cascade-val">David Paulk</span></div>
                    <div class="cascade-item"><span class="cascade-key">Location</span><span class="cascade-val">Lumpkin, GA</span></div>
                    <div class="cascade-item"><span class="cascade-key">Field Office</span><span class="cascade-val">Atlanta</span></div>
                    <div class="cascade-item"><span class="cascade-key">FOD</span><span class="cascade-val">Dir. Sean Gallagher</span></div>
                    <div class="cascade-item"><span class="cascade-key">Court</span><span class="cascade-val">M.D. Georgia</span></div>
                    <div class="cascade-item"><span class="cascade-key">Circuit</span><span class="cascade-val">11th Circuit</span></div>
                    <div class="cascade-item"><span class="cascade-key">AG</span><span class="cascade-val">Pam Bondi</span></div>
                    <div class="cascade-item"><span class="cascade-key">ICE Dir.</span><span class="cascade-val">Todd Lyons</span></div>
                  </div>
                </div>
              </div>

              <div class="intake-section">
                <div class="intake-section-title">Suggested Documents</div>
                <div class="intake-section-desc">Based on ¬ß 1226(a) detention, we recommend these templates. You can add or remove later.</div>
                <div style="display:flex;flex-direction:column;gap:8px;">
                  <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--blue-light);border:1px solid #c5d5f0;border-radius:var(--radius-sm);cursor:pointer;">
                    <input type="checkbox" checked />
                    <div>
                      <div style="font-size:0.82rem;font-weight:500;">Habeas Corpus Petition (¬ß 2241)</div>
                      <div style="font-size:0.7rem;color:var(--text-tertiary);">Petition ¬∑ 6 sections ¬∑ 14 variables</div>
                    </div>
                  </label>
                  <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--blue-light);border:1px solid #c5d5f0;border-radius:var(--radius-sm);cursor:pointer;">
                    <input type="checkbox" checked />
                    <div>
                      <div style="font-size:0.82rem;font-weight:500;">Memorandum in Support</div>
                      <div style="font-size:0.7rem;color:var(--text-tertiary);">Brief ¬∑ 8 sections ¬∑ 11 variables</div>
                    </div>
                  </label>
                  <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--blue-light);border:1px solid #c5d5f0;border-radius:var(--radius-sm);cursor:pointer;">
                    <input type="checkbox" checked />
                    <div>
                      <div style="font-size:0.82rem;font-weight:500;">Petitioner Declaration</div>
                      <div style="font-size:0.7rem;color:var(--text-tertiary);">Filing Doc ¬∑ 4 sections ¬∑ 9 variables</div>
                    </div>
                  </label>
                  <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border:1px solid var(--border);border-radius:var(--radius-sm);cursor:pointer;">
                    <input type="checkbox" checked />
                    <div>
                      <div style="font-size:0.82rem;font-weight:500;">Proposed Order</div>
                      <div style="font-size:0.7rem;color:var(--text-tertiary);">Filing Doc ¬∑ 2 sections ¬∑ 5 variables</div>
                    </div>
                  </label>
                  <label style="display:flex;align-items:center;gap:10px;padding:10px 12px;border:1px solid var(--border);border-radius:var(--radius-sm);cursor:pointer;opacity:0.6;">
                    <input type="checkbox" />
                    <div>
                      <div style="font-size:0.82rem;font-weight:500;">Emergency TRO Motion</div>
                      <div style="font-size:0.7rem;color:var(--text-tertiary);">Motion ¬∑ 5 sections ¬∑ 12 variables</div>
                    </div>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ======================================= -->
      <!-- SCREEN: PIPELINE                        -->
      <!-- ======================================= -->
      <div class="screen" id="screen-pipeline">
        <div style="display:flex;flex-direction:column;flex:1;">
          <div class="pipeline-header">
            <div>
              <h2>Pipeline</h2>
              <p style="font-size:0.78rem;color:var(--text-secondary);margin-top:2px;">12 active cases across 6 stages</p>
            </div>
            <div style="display:flex;gap:8px;align-items:center;">
              <select class="form-input var-input-select" style="padding:6px 30px 6px 10px;font-size:0.75rem;">
                <option>All Attorneys</option>
                <option>Sarah Kim</option>
                <option>David Park</option>
              </select>
            </div>
          </div>

          <!-- Progress strip -->
          <div style="padding:0 28px 16px;display:flex;gap:1px;height:10px;">
            <div style="flex:2;background:var(--stage-intake);border-radius:5px 0 0 5px;" title="Intake: 2"></div>
            <div style="flex:4;background:var(--stage-drafting);" title="Drafting: 4"></div>
            <div style="flex:3;background:var(--stage-review);" title="Review: 3"></div>
            <div style="flex:2;background:var(--stage-ready);" title="Ready: 2"></div>
            <div style="flex:1;background:var(--stage-filed);border-radius:0 5px 5px 0;" title="Filed: 1"></div>
          </div>

          <div class="pipeline-board">
            <!-- Intake -->
            <div class="pipeline-col">
              <div class="pipeline-col-header" style="border-bottom-color:var(--stage-intake);">
                <div class="pipeline-col-dot" style="background:var(--stage-intake);"></div>
                <div class="pipeline-col-name">Intake</div>
                <div class="pipeline-col-count">2</div>
              </div>
              <div class="pipeline-col-body">
                <div class="pipeline-card" style="border-left-color:var(--stage-intake);" onclick="showScreen('workspace')">
                  <div class="pipeline-card-name">Petrov, Ivan</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">1d</span>
                    <span class="pipeline-chip" style="background:var(--bg);color:var(--text-tertiary);">9th Cir.</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-intake);">
                  <div class="pipeline-card-name">Abdi, Hassan</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-yellow">7d</span>
                    <span class="pipeline-chip" style="background:var(--bg);color:var(--text-tertiary);">9th Cir.</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Drafting -->
            <div class="pipeline-col">
              <div class="pipeline-col-header" style="border-bottom-color:var(--stage-drafting);">
                <div class="pipeline-col-dot" style="background:var(--stage-drafting);"></div>
                <div class="pipeline-col-name">Drafting</div>
                <div class="pipeline-col-count">4</div>
              </div>
              <div class="pipeline-col-body">
                <div class="pipeline-card" style="border-left-color:var(--red);" onclick="showScreen('workspace')">
                  <div class="pipeline-card-name">Garcia, Maria</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-red">14d !</span>
                    <span class="pipeline-chip" style="background:var(--bg);color:var(--text-tertiary);">4th Cir.</span>
                    <span class="pipeline-chip" style="background:var(--yellow-light);color:var(--yellow);">3 empty</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-drafting);">
                  <div class="pipeline-card-name">Ramirez, Luis</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">3d</span>
                    <span class="pipeline-chip" style="background:var(--bg);color:var(--text-tertiary);">5th Cir.</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-drafting);">
                  <div class="pipeline-card-name">Santos, Ana</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">2d</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-drafting);">
                  <div class="pipeline-card-name">Doe, John</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">1d</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Attorney Review -->
            <div class="pipeline-col">
              <div class="pipeline-col-header" style="border-bottom-color:var(--stage-review);">
                <div class="pipeline-col-dot" style="background:var(--stage-review);"></div>
                <div class="pipeline-col-name">Attorney Review</div>
                <div class="pipeline-col-count">3</div>
              </div>
              <div class="pipeline-col-body">
                <div class="pipeline-card" style="border-left-color:var(--stage-review);" onclick="showScreen('workspace')">
                  <div class="pipeline-card-name">Okafor, Emeka</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">3d</span>
                    <span class="pipeline-chip" style="background:var(--purple-light);color:var(--purple);">2 comments</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-review);">
                  <div class="pipeline-card-name">Nguyen, Thanh</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-yellow">8d</span>
                    <span class="pipeline-chip" style="background:var(--purple-light);color:var(--purple);">1 comment</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-review);">
                  <div class="pipeline-card-name">Alvarez, Carlos</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">1d</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ready to File -->
            <div class="pipeline-col">
              <div class="pipeline-col-header" style="border-bottom-color:var(--stage-ready);">
                <div class="pipeline-col-dot" style="background:var(--stage-ready);"></div>
                <div class="pipeline-col-name">Ready to File</div>
                <div class="pipeline-col-count">2</div>
              </div>
              <div class="pipeline-col-body">
                <div class="pipeline-card" style="border-left-color:var(--stage-ready);" onclick="showScreen('workspace')">
                  <div class="pipeline-card-name">Chen, Wei</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">2d</span>
                    <span class="pipeline-chip" style="background:var(--green-light);color:var(--green);">4/4 ready</span>
                  </div>
                </div>
                <div class="pipeline-card" style="border-left-color:var(--stage-ready);">
                  <div class="pipeline-card-name">Kim, Soo-jin</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">1d</span>
                    <span class="pipeline-chip" style="background:var(--green-light);color:var(--green);">3/3 ready</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Filed -->
            <div class="pipeline-col">
              <div class="pipeline-col-header" style="border-bottom-color:var(--stage-filed);">
                <div class="pipeline-col-dot" style="background:var(--stage-filed);"></div>
                <div class="pipeline-col-name">Filed</div>
                <div class="pipeline-col-count">1</div>
              </div>
              <div class="pipeline-col-body">
                <div class="pipeline-card" style="border-left-color:var(--stage-filed);">
                  <div class="pipeline-card-name">Herrera, Diego</div>
                  <div class="pipeline-card-chips">
                    <span class="pipeline-chip chip-days-green">4d</span>
                    <span class="pipeline-chip" style="background:var(--blue-light);color:var(--blue);">Awaiting resp.</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Awaiting / Resolved collapsed -->
            <div class="pipeline-col" style="opacity:0.5;">
              <div class="pipeline-col-header" style="border-bottom-color:var(--stage-resolved);">
                <div class="pipeline-col-dot" style="background:var(--stage-resolved);"></div>
                <div class="pipeline-col-name">Resolved</div>
                <div class="pipeline-col-count">0</div>
              </div>
              <div class="pipeline-col-body" style="min-height:40px;">
                <div style="text-align:center;font-size:0.72rem;color:var(--text-tertiary);padding:12px;">No cases</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ======================================= -->
      <!-- SCREEN: TEMPLATES (simplified)          -->
      <!-- ======================================= -->
      <div class="screen" id="screen-templates">
        <div class="screen-body">
          <div class="cases-header">
            <div>
              <h2>Template Library</h2>
              <p style="font-size:0.82rem;color:var(--text-secondary);margin-top:2px;">Shared document templates for the team</p>
            </div>
            <button class="btn btn-primary">+ New Template</button>
          </div>

          <div class="cases-toolbar">
            <div class="search-box">
              <span class="search-icon">‚åï</span>
              <input type="text" placeholder="Search templates‚Ä¶" />
            </div>
            <button class="filter-btn active">All (8)</button>
            <button class="filter-btn">Petitions (3)</button>
            <button class="filter-btn">Motions (2)</button>
            <button class="filter-btn">Filing Docs (2)</button>
            <button class="filter-btn">Briefs (1)</button>
          </div>

          <div class="case-card" style="cursor:default;">
            <div class="case-stage-bar" style="background:var(--blue);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Habeas Corpus Petition (¬ß 2241)</div>
                  <div class="case-subtitle">Standard habeas petition for immigration detention challenges</div>
                  <div style="font-size:0.72rem;color:var(--text-tertiary);margin-top:4px;">6 sections ¬∑ 14 variables ¬∑ Used in 8 cases ¬∑ Last edited 2 days ago</div>
                </div>
                <div style="display:flex;gap:6px;">
                  <button class="btn btn-outline btn-sm">Edit</button>
                  <button class="btn btn-outline btn-sm">Fork</button>
                  <button class="btn btn-primary btn-sm">Use in case</button>
                </div>
              </div>
            </div>
          </div>

          <div class="case-card" style="cursor:default;">
            <div class="case-stage-bar" style="background:var(--purple);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Memorandum in Support</div>
                  <div class="case-subtitle">Legal memorandum supporting habeas petition with due process arguments</div>
                  <div style="font-size:0.72rem;color:var(--text-tertiary);margin-top:4px;">8 sections ¬∑ 11 variables ¬∑ Used in 7 cases ¬∑ Last edited 5 days ago</div>
                </div>
                <div style="display:flex;gap:6px;">
                  <button class="btn btn-outline btn-sm">Edit</button>
                  <button class="btn btn-outline btn-sm">Fork</button>
                  <button class="btn btn-primary btn-sm">Use in case</button>
                </div>
              </div>
            </div>
          </div>

          <div class="case-card" style="cursor:default;">
            <div class="case-stage-bar" style="background:var(--green);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Petitioner Declaration</div>
                  <div class="case-subtitle">First-person declaration from petitioner for filing packet</div>
                  <div style="font-size:0.72rem;color:var(--text-tertiary);margin-top:4px;">4 sections ¬∑ 9 variables ¬∑ Used in 6 cases ¬∑ Last edited 1 week ago</div>
                </div>
                <div style="display:flex;gap:6px;">
                  <button class="btn btn-outline btn-sm">Edit</button>
                  <button class="btn btn-outline btn-sm">Fork</button>
                  <button class="btn btn-primary btn-sm">Use in case</button>
                </div>
              </div>
            </div>
          </div>

          <div class="case-card" style="cursor:default;">
            <div class="case-stage-bar" style="background:var(--orange);"></div>
            <div class="case-body">
              <div class="case-top">
                <div>
                  <div class="case-name">Emergency TRO Motion</div>
                  <div class="case-subtitle">Temporary restraining order for urgent detention situations</div>
                  <div style="font-size:0.72rem;color:var(--text-tertiary);margin-top:4px;">5 sections ¬∑ 12 variables ¬∑ Used in 2 cases ¬∑ Last edited 3 weeks ago</div>
                </div>
                <div style="display:flex;gap:6px;">
                  <button class="btn btn-outline btn-sm">Edit</button>
                  <button class="btn btn-outline btn-sm">Fork</button>
                  <button class="btn btn-primary btn-sm">Use in case</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

    </main>
  </div>

  <script>
    function showScreen(id) {
      // Deactivate all screens
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      // Deactivate all nav items
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));

      // Activate target screen
      const screen = document.getElementById('screen-' + id);
      if (screen) screen.classList.add('active');

      // Activate matching nav item
      const nav = document.querySelector(`.nav-item[data-screen="${id}"]`);
      if (nav) nav.classList.add('active');
    }
  </script>
</body>
</html>
